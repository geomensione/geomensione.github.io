var chars={A:["00100","01010","10001","11111","10001"],B:["11110","10001","11110","10001","11111"],C:["01111","10000","10000","10000","01111"],D:["11110","10001","10001","10001","11111"],E:["11111","10000","11100","10000","11111"],F:["11111","10000","11100","10000","10000"],G:["01111","10000","10011","10001","01110"],H:["10001","10001","11111","10001","10001"],I:["00100","00100","00100","00100","00100"],J:["00001","00001","00001","10001","01110"],K:["10001","10010","11100","10010","10001"],L:["10000","10000","10000","10000","11111"],M:["10001","11011","10101","10001","10001"],N:["10001","11001","10101","10011","10001"],O:["01110","10001","10001","10001","01110"],P:["11110","10001","11110","10000","10000"],Q:["01110","10001","10101","10011","01110"],R:["11110","10001","11110","10001","10001"],S:["01111","10000","01110","00001","11110"],T:["11111","00100","00100","00100","00100"],U:["10001","10001","10001","10001","01110"],V:["10001","10001","10001","01010","00100"],W:["10001","10101","10101","10101","01010"],X:["10001","01010","00100","01010","10001"],Y:["10001","01010","00100","00100","00100"],Z:["11111","00010","00100","01000","11111"],"!":["00100","00100","00100","00000","00100"],".":["00000","00000","00000","00000","00100"]," ":["00000","00000","00000","00000","00000"],1:["00010","00110","01010","00010","00010"],2:["01110","10001","00010","01100","11111"],3:["11110","00001","00110","00001","11110"],4:["00010","00110","01010","11111","00010"],5:["11111","10000","11110","00001","11110"],6:["01111","10000","11110","10001","01110"],7:["11111","00001","00010","00100","01000"],8:["01110","10001","01110","10001","01110"],9:["01110","10001","01111","00001","01110"],0:["01110","11001","10101","10011","01110"],"-":["00000","00000","01110","00000","00000"]};sh={39:["W0W00000","W0WW0000","WWWWW000","WWW0WWWW","WWW0WWWW","WWWWW000","W0WW0000","W0W00000"],38:["000WW000","000WW000","000WW000","00WWWW00","0WW00WW0","WWWWWWWW","00WWWW00","WWWWWWWW"],37:["00000W0W","0000WW0W","000WWWWW","WWWW0WWW","WWWW0WWW","000WWWWW","0000WW0W","00000W0W"],40:["WWWWWWWW","00WWWW00","WWWWWWWW","0WW00WW0","00WWWW00","000WW000","000WW000","000WW000"]},en={39:["W0W00000","W0WW0000","WWWWW000","WWW0WWWW","WWW0WWWW","WWWWW000","W0WW0000","W0W00000"],38:["000WW000","000WW000","000WW000","00WWWW00","0WW00WW0","WWWWWWWW","00WWWW00","WWWWWWWW"],37:["00000W0W","0000WW0W","000WWWWW","WWWW0WWW","WWWW0WWW","000WWWWW","0000WW0W","00000W0W"],40:["WWWWWWWW","00WWWW00","WWWWWWWW","0WW00WW0","00WWWW00","000WW000","000WW000","000WW000"]};var hero={0:["WWWWW","W000W","WWWWW","0W0W0","W0W0W"]};u={drawText:t=>{var i=1,e=1;if(-1!==t.sc.indexOf("-")){let n=t.sc.split("-"),s=n.length;for(let o=0;o<s;o++){let s=n[o].length;for(var W=0;W<s;W++)i+=u.drawLetter(t,i,e,n[o].charAt(W),["EE","EE","11"])+1;i=0,e+=chars[0].length+1}}},drawLetter:(t,i,e,W,n)=>{var s=chars[W];if(!s)return 0;for(var o=0;o<s[0].length;o++)for(var r=0;r<s.length;r++)"1"===s[r].charAt(o)&&t.fb&&t.fb[i+o]&&t.fb[i+o][e+r]&&(t.fb[i+o][e+r]=n);return s[0].length},random:(t,i)=>{var e=Math.floor(Math.random()*t);return i&&(e*=1==Math.floor(2*Math.random())?1:-1),e},setRandomValue:function(t){t.quy=u.random(3,!0),t.qux=u.random(3,!0),console.log(`${t.qux} ${t.quy}`),t.cx=u.random(t.rx-t.s),t.cy=u.random(t.ry-t.s),t.picked=!1},clear:(t,i,e,W)=>{t.fillStyle=`rgb(${i}, ${e}, ${W})`,t.fillRect(0,0,la[0].w,la[0].h)}},u.startInterval=((t,i)=>{u.interval||(u.interval=setInterval(t,i))}),u.clearInterval=(()=>{window.clearInterval(u.interval),u.interval=!1}),u.intervRun=(()=>!!u.interval),u.timer,u.startTimer=((t,i)=>{u.timer||(u.timer=setInterval(t,i))}),u.clearTimer=(()=>{window.clearInterval(u.timer),u.timer=!1}),u.timerRun=(()=>!!u.timer),window.a=document.getElementsByTagName("canvas")[0],window.b=document.getElementsByTagName("body")[0],window.c=window.a.getContext("2d"),window.d=document,a.width=window.innerWidth,a.height=window.innerHeight;var la=[],fr=100,t={},g={},b={},bo={},e={},h={},mx=0,my=0,sx=0,sy=0,mousepressed=!1,el=d.documentElement,qx=0,qy=0;function down(t){return t.my+t.sp<t.ry?t.my+t.sp:(t.update_quadrant&&qx--,0)}function up(t){return t.my-t.sp>0?t.my-t.sp:(t.update_quadrant&&qx++,t.ry-1)}function left(t){return t.mx-t.sp>0?t.mx-t.sp:(t.update_quadrant&&qy--,t.rx-t.sp)}function right(t){return t.mx+t.sp<t.rx?t.mx+t.sp:(t.update_quadrant&&qy++,0)}function doInt(t,i){let e,W=la[0].w/3,n=la[0].h/2;for(let s=0,o=la.length;s<o;s++)la[s].sp&&(la[s].x=t||la[s].x,la[s].y=i||la[s].y,la[s].x<W?(e="37",la[s].mx=left(la[s])):la[s].x>2*W?(e="39",la[s].mx=right(la[s])):la[s].x>W&&(la[s].y>n?(e="40",la[s].my=down(la[s])):(e="38",la[s].my=up(la[s]))),sx=la[s].mx,sy=la[s].my),la[s].dir&&(la[s].dir=e)}function updateCoord(t,i){if(mousepressed)for(let e=0,W=la.length;e<W;e++)la[e].x=t,la[e].y=i}function gameEvents(){el.ontouchstart=function(t){mousepressed=!0,doInt(t.changedTouches[0].pageX,t.changedTouches[0].pageY)},el.ontouchend=function(t){mousepressed=!1},el.ontouchmove=function(t){updateCoord(t.changedTouches[0].pageX,t.changedTouches[0].pageY)},d.onmousemove=function(t){updateCoord(t.clientX,t.clientY)},d.onmouseup=function(t){mousepressed=!1},d.onmousedown=function(t){mousepressed=!0;let i=t.clientX,e=t.clientY;doInt(i,e)},d.onkeydown=function(t){t=t||window.event;let i="";for(let e=0,W=la.length;e<W;e++)la[e].sp&&("40"==t.keyCode&&(la[e].my=down(la[e]),i="40"),"38"==t.keyCode&&(la[e].my=up(la[e]),i="38"),"37"==t.keyCode&&(la[e].mx=left(la[e]),i="37"),"39"==t.keyCode&&(la[e].mx=right(la[e]),i="39"),sx=la[e].mx,sy=la[e].my),la[e].dir&&(la[e].dir=i)}}function gr(t){function i(t){var i,e=la[t].w,W=la[t].h;W<e?(i=Math.round(W/la[t].r),la[t].ry=Math.round(W/i),la[t].rx=Math.round(e/i)):(i=Math.round(e/la[t].r),la[t].rx=Math.round(e/i),la[t].ry=Math.round(W/i)),la[t].o=i,la[t].fb_fn&&la[t].fb_fn()}if(t)i(t);else for(let t=0,e=la.length;t<e;t++)i(t)}function dr(){mousepressed&&doInt();for(let t=0,i=la.length;t<i;t++)la[t].d_fn()}function l(){u.clearInterval(),gameEvents(),u.startInterval(function(){u.clear(c,0,0,0),gr(),dr()},fr)}function splash(i){let e=0;var W;W=i||doc,u.intervRun()&&u.clearInterval(),u.startInterval(function(){u.clear(c,0,0,0),gr(),t.fb_fn&&t.fb_fn("OFFLINE-"+W[e%5]),t.d_fn&&t.d_fn(),e++},800),d.onkeydown=(i=>{switch(i.key){case"v":case"e":case"m":case"h":case"w":g.difficulty=i.key,u.intervRun()&&u.clearInterval(),t.countDown=t.startSeconds,u.startTimer(function(){t.setTime()},1e3),l();break;case"s":splash(doc)}})}window.score=0,window.l_i,window.l_spl,la[la.length]=bo,la[la.length]=b,la[la.length]=g,la[la.length]=h,la[la.length]=t;var doc=["V VERY-EASY","E EASY","M MEDIUM","H HARD","W VERY-HARD"];g.w=window.innerWidth,g.h=window.innerHeight,g.r=24,g.s=8,g.dir=39,g.difficulty,g.fb_fn=function(){this.fb=[];let t=this.rx,i=this.ry;for(let e=0;e<t;e++){this.fb[e]=[];for(let t=0;t<i;t++)this.fb[e][t]=["00","00","00"]}let e=Math.floor(this.w/2/this.o-this.s/2),W=Math.floor(this.h/2/this.o-this.s/2);for(let t=0;t<this.s;t++)for(let i=0;i<this.s;i++)sh[this.dir]&&sh[this.dir][i]&&sh[this.dir][i][t]&&"W"===sh[this.dir][i][t]&&(this.fb[e+t][W+i]=["FF","FF","FF"])},g.d_fn=function(){let t=this.rx,i=this.ry,e=this.o,W=0,n=0;for(let s=0;s<t;s++){for(let t=0;t<i;t++)"00"!==this.fb[s][t][0]&&(c.fillStyle="#"+this.fb[s][t][0]+this.fb[s][t][1]+this.fb[s][t][2],c.fillRect(W,n,e,e)),n+=e;W+=e,n=0}},bo.w=window.innerWidth,bo.h=window.innerHeight,bo.r=96,bo.s=1,bo.do=0,bo.sts=50,bo.sp=1,bo.mx=0,bo.my=0,bo.fb_fn=function(){if(!this.do){this.do=1,this.fb=[];let t=this.rx,i=this.ry;for(let e=0;e<t;e++){this.fb[e]=[];for(let t=0;t<i;t++)this.fb[e][t]=["00","00","00"]}for(let t=0;t<this.sts;t++){let t=Math.floor(Math.random()*(this.rx-this.s)),i=Math.floor(Math.random()*(this.ry-this.s));this.fb[t][i]=["11","00","AA"]}}},bo.d_fn=function(){let t=this.rx,i=this.ry,e=this.o,W=0,n=0;for(let s=this.mx,o=0;o<t;o++){for(let t=this.my,o=0;o<i;o++)"00"!==this.fb[s][t][0]&&(c.fillStyle="#"+this.fb[s][t][0]+this.fb[s][t][1]+this.fb[s][t][2],c.fillRect(W,n,e,e)),t+1<i?t+=1:t=0,n+=e;s+1<t?s+=1:s=0,W+=e,n=0}},t.w=window.innerWidth,t.h=window.innerHeight,t.r=36,t.s=5,t.sc="",t.fb_fn=function(i){this.fb=[];let e=this.rx,W=this.ry;for(let n=0;n<e;n++){this.fb[n]=[];for(let t=0;t<W;t++)this.fb[n][t]=["00","00","00"];i?this.sc=i:(this.sc=window.score.toString(),"w"!==g.difficulty&&(this.sc+=` ${window.dir}`),this.sc+=`-${t.countDown}`),u.drawText(this)}},t.d_fn=function(){let t=this.rx,i=this.ry,e=this.o,W=0,n=0;for(let s=0;s<t;s++){for(let t=0;t<i;t++)"00"!==this.fb[s][t][0]&&(c.fillStyle="#"+this.fb[s][t][0]+this.fb[s][t][1]+this.fb[s][t][2],c.fillRect(W,n,e,e)),n+=e;W+=e,n=0}},t.countDown=60,t.startSeconds=60,t.setTime=(()=>{t.countDown-1>0?(t.countDown--,t.fb_fn()):(t.countDown=60,window.score=0,u.clearTimer(),splash(["TIME-IS-FINISHED","PRESS-S TO-RESTART"]))}),b.w=window.innerWidth,b.h=window.innerHeight,b.r=48,b.s=1,b.do=0,b.sts=50,b.sp=2,b.mx=0,b.my=0,b.update_quadrant=!0,b.fb_fn=function(){if(!this.do){this.do=1,this.fb=[];let t=this.rx,i=this.ry;for(let e=0;e<t;e++){this.fb[e]=[];for(let t=0;t<i;t++)this.fb[e][t]=["00","00","00"]}for(let t=0;t<this.sts;t++){let t=Math.floor(Math.random()*(this.rx-this.s)),i=Math.floor(Math.random()*(this.ry-this.s));this.fb[t][i]=["AA","AA","AA"]}}},b.d_fn=function(){let t=this.rx,i=this.ry,e=this.o,W=0,n=0;for(let s=this.mx,o=0;o<t;o++){for(let t=this.my,o=0;o<i;o++)"00"!==this.fb[s][t][0]&&(c.fillStyle="#"+this.fb[s][t][0]+this.fb[s][t][1]+this.fb[s][t][2],c.fillRect(W,n,e,e)),t+1<i?t+=1:t=0,n+=e;s+1<t?s+=1:s=0,W+=e,n=0}},h.w=window.innerWidth,h.h=window.innerHeight,h.r=48,h.s=5,h.sp=2,h.mx=0,h.my=0,h.fb_fn=function(){if(this.fb=[],void 0===this.picked||this.picked){switch(u.setRandomValue(this),g.difficulty){case"v":t.countDown--;break;case"e":t.countDown-=2;break;case"m":t.countDown-=5;break;case"h":t.countDown-=15;break;case"w":t.countDown=Math.round(t.countDown/2)}this.picked&&(this.picked=!1)}let i=this.rx,e=this.ry;for(let t=0;t<i;t++){this.fb[t]=[];for(let i=0;i<e;i++)this.fb[t][i]=["00","00","00"]}for(let t=0;t<this.s;t++)for(let i=0;i<this.s;i++)"W"===hero[0][i][t]&&(this.fb[this.cx+t][this.cy+i]=["11","FF","00"])},h.hit=function(t,i,e,W,n){for(var s=c.getImageData(t,i,e,W).data,o=[255,255,255],r=0,l=s.length;r<l;r+=4)if(s[r]===o[0]&&s[r+1]===o[1]&&s[r+2]===o[2]){n(),u.clear(c,255,255,255);break}},h.d_fn=function(){let t=this.rx,i=this.ry,e=this.o,W=0,n=0,s=0;var o=this;function r(t,i,e){return t.qux===i&&t.quy===e}if(window.dir="",this.qux<qx&&(window.dir+="D"),this.qux>qx&&(window.dir+="U"),this.quy<qy&&(window.dir+="L"),this.quy>qy&&(window.dir+="R"),r(this,qx-1,qy)||r(this,qx,qy+1)||r(this,qx-1,qy+1)||r(this,qx,qy)){let l=0,a=0,f=0,d=0,u=0,w=0;l=sx,a=sy,f=t,d=i,r(this,qx,qy),r(this,qx-1,qy)&&(n=(i-sy)*e,s=(i-sy)*e,a=i-sy,w=i-sy),r(this,qx,qy+1)&&(W=(t-sx)*e,l=0),r(this,qx-1,qy+1)&&(n=(i-sy)*e,s=(i-sy)*e,a=i-sy,w=i-sy,W=(t-sx)*e,l=0);let b=!1;for(let t=l;t<f;t++){for(let i=a;i<d;i++)this.fb[t-u]&&this.fb[t-u][i-w]&&this.fb[t-u][i-w][0]||console.log("not exist "+t+", "+i),"00"===this.fb[t-u][i-w][0]||b?"w"!==g.difficulty&&"h"!==g.difficulty&&(c.fillStyle="rgba(0,255,0,0.1)",c.fillRect(W,n,e,e)):(this.hit(W+e/2,n+e/2,1,1,function(){b=!0,window.score++,o.picked=!0,h.fb_fn()}),c.fillStyle="#"+this.fb[t-u][i-w][0]+this.fb[t-u][i-w][1]+this.fb[t-u][i-w][2],c.fillRect(W,n,e,e)),n+=e;W+=e,n=s}}};chars={A:["00100","01010","10001","11111","10001"],B:["11110","10001","11110","10001","11111"],C:["01111","10000","10000","10000","01111"],D:["11110","10001","10001","10001","11111"],E:["11111","10000","11100","10000","11111"],F:["11111","10000","11100","10000","10000"],G:["01111","10000","10011","10001","01110"],H:["10001","10001","11111","10001","10001"],I:["00100","00100","00100","00100","00100"],J:["00001","00001","00001","10001","01110"],K:["10001","10010","11100","10010","10001"],L:["10000","10000","10000","10000","11111"],M:["10001","11011","10101","10001","10001"],N:["10001","11001","10101","10011","10001"],O:["01110","10001","10001","10001","01110"],P:["11110","10001","11110","10000","10000"],Q:["01110","10001","10101","10011","01110"],R:["11110","10001","11110","10001","10001"],S:["01111","10000","01110","00001","11110"],T:["11111","00100","00100","00100","00100"],U:["10001","10001","10001","10001","01110"],V:["10001","10001","10001","01010","00100"],W:["10001","10101","10101","10101","01010"],X:["10001","01010","00100","01010","10001"],Y:["10001","01010","00100","00100","00100"],Z:["11111","00010","00100","01000","11111"],"!":["00100","00100","00100","00000","00100"],".":["00000","00000","00000","00000","00100"]," ":["00000","00000","00000","00000","00000"],1:["00010","00110","01010","00010","00010"],2:["01110","10001","00010","01100","11111"],3:["11110","00001","00110","00001","11110"],4:["00010","00110","01010","11111","00010"],5:["11111","10000","11110","00001","11110"],6:["01111","10000","11110","10001","01110"],7:["11111","00001","00010","00100","01000"],8:["01110","10001","01110","10001","01110"],9:["01110","10001","01111","00001","01110"],0:["01110","11001","10101","10011","01110"],"-":["00000","00000","01110","00000","00000"]};sh={39:["W0W00000","W0WW0000","WWWWW000","WWW0WWWW","WWW0WWWW","WWWWW000","W0WW0000","W0W00000"],38:["000WW000","000WW000","000WW000","00WWWW00","0WW00WW0","WWWWWWWW","00WWWW00","WWWWWWWW"],37:["00000W0W","0000WW0W","000WWWWW","WWWW0WWW","WWWW0WWW","000WWWWW","0000WW0W","00000W0W"],40:["WWWWWWWW","00WWWW00","WWWWWWWW","0WW00WW0","00WWWW00","000WW000","000WW000","000WW000"]},en={39:["W0W00000","W0WW0000","WWWWW000","WWW0WWWW","WWW0WWWW","WWWWW000","W0WW0000","W0W00000"],38:["000WW000","000WW000","000WW000","00WWWW00","0WW00WW0","WWWWWWWW","00WWWW00","WWWWWWWW"],37:["00000W0W","0000WW0W","000WWWWW","WWWW0WWW","WWWW0WWW","000WWWWW","0000WW0W","00000W0W"],40:["WWWWWWWW","00WWWW00","WWWWWWWW","0WW00WW0","00WWWW00","000WW000","000WW000","000WW000"]};var u;hero={0:["WWWWW","W000W","WWWWW","0W0W0","W0W0W"]};u={drawText:t=>{var i=1,e=1;if(-1!==t.sc.indexOf("-")){let n=t.sc.split("-"),s=n.length;for(let o=0;o<s;o++){let s=n[o].length;for(var W=0;W<s;W++)i+=u.drawLetter(t,i,e,n[o].charAt(W),["EE","EE","11"])+1;i=0,e+=chars[0].length+1}}},drawLetter:(t,i,e,W,n)=>{var s=chars[W];if(!s)return 0;for(var o=0;o<s[0].length;o++)for(var r=0;r<s.length;r++)"1"===s[r].charAt(o)&&t.fb&&t.fb[i+o]&&t.fb[i+o][e+r]&&(t.fb[i+o][e+r]=n);return s[0].length},random:(t,i)=>{var e=Math.floor(Math.random()*t);return i&&(e*=1==Math.floor(2*Math.random())?1:-1),e},setRandomValue:function(t){t.quy=u.random(3,!0),t.qux=u.random(3,!0),console.log(`${t.qux} ${t.quy}`),t.cx=u.random(t.rx-t.s),t.cy=u.random(t.ry-t.s),t.picked=!1},clear:(t,i,e,W)=>{t.fillStyle=`rgb(${i}, ${e}, ${W})`,t.fillRect(0,0,la[0].w,la[0].h)}},u.startInterval=((t,i)=>{u.interval||(u.interval=setInterval(t,i))}),u.clearInterval=(()=>{window.clearInterval(u.interval),u.interval=!1}),u.intervRun=(()=>!!u.interval),u.timer,u.startTimer=((t,i)=>{u.timer||(u.timer=setInterval(t,i))}),u.clearTimer=(()=>{window.clearInterval(u.timer),u.timer=!1}),u.timerRun=(()=>!!u.timer),window.a=document.getElementsByTagName("canvas")[0],window.b=document.getElementsByTagName("body")[0],window.c=window.a.getContext("2d"),window.d=document,a.width=window.innerWidth,a.height=window.innerHeight;la=[],fr=100,t={},g={},b={},bo={},e={},h={},mx=0,my=0,sx=0,sy=0,mousepressed=!1,el=d.documentElement,qx=0,qy=0;function down(t){return t.my+t.sp<t.ry?t.my+t.sp:(t.update_quadrant&&qx--,0)}function up(t){return t.my-t.sp>0?t.my-t.sp:(t.update_quadrant&&qx++,t.ry-1)}function left(t){return t.mx-t.sp>0?t.mx-t.sp:(t.update_quadrant&&qy--,t.rx-t.sp)}function right(t){return t.mx+t.sp<t.rx?t.mx+t.sp:(t.update_quadrant&&qy++,0)}function doInt(t,i){let e,W=la[0].w/3,n=la[0].h/2;for(let s=0,o=la.length;s<o;s++)la[s].sp&&(la[s].x=t||la[s].x,la[s].y=i||la[s].y,la[s].x<W?(e="37",la[s].mx=left(la[s])):la[s].x>2*W?(e="39",la[s].mx=right(la[s])):la[s].x>W&&(la[s].y>n?(e="40",la[s].my=down(la[s])):(e="38",la[s].my=up(la[s]))),sx=la[s].mx,sy=la[s].my),la[s].dir&&(la[s].dir=e)}function updateCoord(t,i){if(mousepressed)for(let e=0,W=la.length;e<W;e++)la[e].x=t,la[e].y=i}function gameEvents(){el.ontouchstart=function(t){mousepressed=!0,doInt(t.changedTouches[0].pageX,t.changedTouches[0].pageY)},el.ontouchend=function(t){mousepressed=!1},el.ontouchmove=function(t){updateCoord(t.changedTouches[0].pageX,t.changedTouches[0].pageY)},d.onmousemove=function(t){updateCoord(t.clientX,t.clientY)},d.onmouseup=function(t){mousepressed=!1},d.onmousedown=function(t){mousepressed=!0;let i=t.clientX,e=t.clientY;doInt(i,e)},d.onkeydown=function(t){t=t||window.event;let i="";for(let e=0,W=la.length;e<W;e++)la[e].sp&&("40"==t.keyCode&&(la[e].my=down(la[e]),i="40"),"38"==t.keyCode&&(la[e].my=up(la[e]),i="38"),"37"==t.keyCode&&(la[e].mx=left(la[e]),i="37"),"39"==t.keyCode&&(la[e].mx=right(la[e]),i="39"),sx=la[e].mx,sy=la[e].my),la[e].dir&&(la[e].dir=i)}}function gr(t){function i(t){var i,e=la[t].w,W=la[t].h;W<e?(i=Math.round(W/la[t].r),la[t].ry=Math.round(W/i),la[t].rx=Math.round(e/i)):(i=Math.round(e/la[t].r),la[t].rx=Math.round(e/i),la[t].ry=Math.round(W/i)),la[t].o=i,la[t].fb_fn&&la[t].fb_fn()}if(t)i(t);else for(let t=0,e=la.length;t<e;t++)i(t)}function dr(){mousepressed&&doInt();for(let t=0,i=la.length;t<i;t++)la[t].d_fn()}function l(){u.clearInterval(),gameEvents(),u.startInterval(function(){u.clear(c,0,0,0),gr(),dr()},fr)}function splash(i){let e=0;var W;W=i||doc,u.intervRun()&&u.clearInterval(),u.startInterval(function(){u.clear(c,0,0,0),gr(),t.fb_fn&&t.fb_fn("OFFLINE-"+W[e%5]),t.d_fn&&t.d_fn(),e++},800),d.onkeydown=(i=>{switch(i.key){case"v":case"e":case"m":case"h":case"w":g.difficulty=i.key,u.intervRun()&&u.clearInterval(),t.countDown=t.startSeconds,u.startTimer(function(){t.setTime()},1e3),l();break;case"s":splash(doc)}})}window.score=0,window.l_i,window.l_spl,la[la.length]=bo,la[la.length]=b,la[la.length]=g,la[la.length]=h,la[la.length]=t;doc=["V VERY-EASY","E EASY","M MEDIUM","H HARD","W VERY-HARD"];g.w=window.innerWidth,g.h=window.innerHeight,g.r=24,g.s=8,g.dir=39,g.difficulty,g.fb_fn=function(){this.fb=[];let t=this.rx,i=this.ry;for(let e=0;e<t;e++){this.fb[e]=[];for(let t=0;t<i;t++)this.fb[e][t]=["00","00","00"]}let e=Math.floor(this.w/2/this.o-this.s/2),W=Math.floor(this.h/2/this.o-this.s/2);for(let t=0;t<this.s;t++)for(let i=0;i<this.s;i++)sh[this.dir]&&sh[this.dir][i]&&sh[this.dir][i][t]&&"W"===sh[this.dir][i][t]&&(this.fb[e+t][W+i]=["FF","FF","FF"])},g.d_fn=function(){let t=this.rx,i=this.ry,e=this.o,W=0,n=0;for(let s=0;s<t;s++){for(let t=0;t<i;t++)"00"!==this.fb[s][t][0]&&(c.fillStyle="#"+this.fb[s][t][0]+this.fb[s][t][1]+this.fb[s][t][2],c.fillRect(W,n,e,e)),n+=e;W+=e,n=0}},bo.w=window.innerWidth,bo.h=window.innerHeight,bo.r=96,bo.s=1,bo.do=0,bo.sts=50,bo.sp=1,bo.mx=0,bo.my=0,bo.fb_fn=function(){if(!this.do){this.do=1,this.fb=[];let t=this.rx,i=this.ry;for(let e=0;e<t;e++){this.fb[e]=[];for(let t=0;t<i;t++)this.fb[e][t]=["00","00","00"]}for(let t=0;t<this.sts;t++){let t=Math.floor(Math.random()*(this.rx-this.s)),i=Math.floor(Math.random()*(this.ry-this.s));this.fb[t][i]=["11","00","AA"]}}},bo.d_fn=function(){let t=this.rx,i=this.ry,e=this.o,W=0,n=0;for(let s=this.mx,o=0;o<t;o++){for(let t=this.my,o=0;o<i;o++)"00"!==this.fb[s][t][0]&&(c.fillStyle="#"+this.fb[s][t][0]+this.fb[s][t][1]+this.fb[s][t][2],c.fillRect(W,n,e,e)),t+1<i?t+=1:t=0,n+=e;s+1<t?s+=1:s=0,W+=e,n=0}},t.w=window.innerWidth,t.h=window.innerHeight,t.r=36,t.s=5,t.sc="",t.fb_fn=function(i){this.fb=[];let e=this.rx,W=this.ry;for(let n=0;n<e;n++){this.fb[n]=[];for(let t=0;t<W;t++)this.fb[n][t]=["00","00","00"];i?this.sc=i:(this.sc=window.score.toString(),"w"!==g.difficulty&&(this.sc+=` ${window.dir}`),this.sc+=`-${t.countDown}`),u.drawText(this)}},t.d_fn=function(){let t=this.rx,i=this.ry,e=this.o,W=0,n=0;for(let s=0;s<t;s++){for(let t=0;t<i;t++)"00"!==this.fb[s][t][0]&&(c.fillStyle="#"+this.fb[s][t][0]+this.fb[s][t][1]+this.fb[s][t][2],c.fillRect(W,n,e,e)),n+=e;W+=e,n=0}},t.countDown=60,t.startSeconds=60,t.setTime=(()=>{t.countDown-1>0?(t.countDown--,t.fb_fn()):(t.countDown=60,window.score=0,u.clearTimer(),splash(["TIME-IS-FINISHED","PRESS-S TO-RESTART"]))}),b.w=window.innerWidth,b.h=window.innerHeight,b.r=48,b.s=1,b.do=0,b.sts=50,b.sp=2,b.mx=0,b.my=0,b.update_quadrant=!0,b.fb_fn=function(){if(!this.do){this.do=1,this.fb=[];let t=this.rx,i=this.ry;for(let e=0;e<t;e++){this.fb[e]=[];for(let t=0;t<i;t++)this.fb[e][t]=["00","00","00"]}for(let t=0;t<this.sts;t++){let t=Math.floor(Math.random()*(this.rx-this.s)),i=Math.floor(Math.random()*(this.ry-this.s));this.fb[t][i]=["AA","AA","AA"]}}},b.d_fn=function(){let t=this.rx,i=this.ry,e=this.o,W=0,n=0;for(let s=this.mx,o=0;o<t;o++){for(let t=this.my,o=0;o<i;o++)"00"!==this.fb[s][t][0]&&(c.fillStyle="#"+this.fb[s][t][0]+this.fb[s][t][1]+this.fb[s][t][2],c.fillRect(W,n,e,e)),t+1<i?t+=1:t=0,n+=e;s+1<t?s+=1:s=0,W+=e,n=0}},h.w=window.innerWidth,h.h=window.innerHeight,h.r=48,h.s=5,h.sp=2,h.mx=0,h.my=0,h.fb_fn=function(){if(this.fb=[],void 0===this.picked||this.picked){switch(u.setRandomValue(this),g.difficulty){case"v":t.countDown--;break;case"e":t.countDown-=2;break;case"m":t.countDown-=5;break;case"h":t.countDown-=15;break;case"w":t.countDown=Math.round(t.countDown/2)}this.picked&&(this.picked=!1)}let i=this.rx,e=this.ry;for(let t=0;t<i;t++){this.fb[t]=[];for(let i=0;i<e;i++)this.fb[t][i]=["00","00","00"]}for(let t=0;t<this.s;t++)for(let i=0;i<this.s;i++)"W"===hero[0][i][t]&&(this.fb[this.cx+t][this.cy+i]=["11","FF","00"])},h.hit=function(t,i,e,W,n){for(var s=c.getImageData(t,i,e,W).data,o=[255,255,255],r=0,l=s.length;r<l;r+=4)if(s[r]===o[0]&&s[r+1]===o[1]&&s[r+2]===o[2]){n(),u.clear(c,255,255,255);break}},h.d_fn=function(){let t=this.rx,i=this.ry,e=this.o,W=0,n=0,s=0;var o=this;function r(t,i,e){return t.qux===i&&t.quy===e}if(window.dir="",this.qux<qx&&(window.dir+="D"),this.qux>qx&&(window.dir+="U"),this.quy<qy&&(window.dir+="L"),this.quy>qy&&(window.dir+="R"),r(this,qx-1,qy)||r(this,qx,qy+1)||r(this,qx-1,qy+1)||r(this,qx,qy)){let l=0,a=0,f=0,d=0,u=0,w=0;l=sx,a=sy,f=t,d=i,r(this,qx,qy),r(this,qx-1,qy)&&(n=(i-sy)*e,s=(i-sy)*e,a=i-sy,w=i-sy),r(this,qx,qy+1)&&(W=(t-sx)*e,l=0),r(this,qx-1,qy+1)&&(n=(i-sy)*e,s=(i-sy)*e,a=i-sy,w=i-sy,W=(t-sx)*e,l=0);let b=!1;for(let t=l;t<f;t++){for(let i=a;i<d;i++)this.fb[t-u]&&this.fb[t-u][i-w]&&this.fb[t-u][i-w][0]||console.log("not exist "+t+", "+i),"00"===this.fb[t-u][i-w][0]||b?"w"!==g.difficulty&&"h"!==g.difficulty&&(c.fillStyle="rgba(0,255,0,0.1)",c.fillRect(W,n,e,e)):(this.hit(W+e/2,n+e/2,1,1,function(){b=!0,window.score++,o.picked=!0,h.fb_fn()}),c.fillStyle="#"+this.fb[t-u][i-w][0]+this.fb[t-u][i-w][1]+this.fb[t-u][i-w][2],c.fillRect(W,n,e,e)),n+=e;W+=e,n=s}}};