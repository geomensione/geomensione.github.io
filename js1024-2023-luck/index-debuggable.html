<html>
<head></head>
<body>
<canvas id=c>
</canvas>
<script>

	window.a = document.getElementsByTagName('canvas')[0];
	window.b = document.getElementsByTagName('body')[0];
	window.c = window.a.getContext('2d',{'willReadFrequently':true})
	window.d = document;
	a.width = window.innerWidth;
	a.height = window.innerHeight;
	/*
	JS1K start
	*/
	//Init
	var g = {}
	g.fr = 50
	dw = a.width
    dh = a.height
    fs = (dw>=dh?dh:dw)/3*2.2
    c.font = fs+'px Arial'
	document.addEventListener('keydown',(e)=>{
						switch(event.keyCode){
							case 37:
								h.dir = 'l'
								break
							case 38:
								h.dir = 'j'
								break
							case 39:
								h.dir = 'r'
								break
							case 40:
								h.dir = 'd'
								break
						}
					})
					document.addEventListener('keyup',(e)=>{
						h.dir = '';
					})
	rd = Math.round
	h = {
		x:50,y:10,r:10,dir:"",tx:0,ty:0,p:{},vj:[],ij:0,sal:true,
		move: () => {
			p = {}
			h.tx = 0
			h.ty = 0
			switch(h.dir){
				case '':
				h.tx=h.x
				h.ty=h.y + h.r
					break
				case 'l':
				h.tx=h.x - h.r
				h.ty=h.y
					break
				case 'j':
					//qundo salto la coordinata x è uguale
					h.tx=h.x
					//se il vettore del salto è vuoto lo inizializzo
					if(h.sal){
						if (h.vj.length == 0) { h.vj.push(50/2) }
							//altrimenti aggiungo il precedente valore / 2
						else { h.vj.push( h.vj[h.ij-1]/2 ) }
							//prendo il valore per il salto
						let jv = h.vj[h.ij]
							// nella salita controllo che sia != 0
							h.ij++
						if (jv > 0) {
						h.ty=h.y - h.vj[h.ij]
						}else{
							h.sal=false
						}
					}else{
						h.ty=h.y - h.vj[h.ij]
						if ((h.ij-1)>0) h.ij--
						else{
							h.sal = true
							h.dir=''
						}
					}
					
					break
				case 'r':
				h.tx=h.x + h.r
				h.ty=h.y
					break
			}
			
			updateCoord = () => {
				h.tp = c.getImageData(h.tx, h.ty, 1, 1, { colorSpace: "srgb" }).data 
				
				h.hex = h.tp[0] + h.tp[1] + h.tp[2]
				if(h.hex != 0){
					switch(h.dir){
						case '':
							if(h.y<a.height) h.y += h.r
							return
						case 'l':
							if(h.x>0) h.x -= h.r
							return
						case 'j':
							if(h.y>0) h.y -= h.r
							return
						case 'r':
							if(h.x<a.width) h.x += h.r
							return
						
					}
					
				}
			}
			updateCoord()
			/*
			if(h.dir!=''){
				h.tx=h.x
				h.ty=h.y + h.r
			}
			updateCoord()
			*/ 
		},
		d: () => {
			c.beginPath();
			c.arc(h.x,h.y,h.r,0,2 * Math.PI)
			c.stroke();
			h.move()
		},
	}
	dr = () => {
		c.fillStyle = '#FFFFFF'
		c.fillRect(0,0,a.width,a.height)
		c.fillStyle = '#000000'
		c.strokeStyle = '#000000'
		c.fillText('LUCK',0,fs)
		h.d()
	}
    
	function l(){
		g.l = setInterval(function() {
			dr();
		}, g.fr);
	}
	 
	l();
</script>
</body>
</html>
