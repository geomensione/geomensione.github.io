<html>
<head></head>
<body>
<canvas id=c>
</canvas>
  <input type='text' id="uno" value="1" onchange="superformula()"></input>
  <input type='text' id="due" value="2" onchange="superformula()"></input>
  <input type='text' id="tre" value="3" onchange="superformula()"></input>
  <input type='text' id="quattro" value="4" onchange="superformula()"></input>
<script>

// @see: https://en.wikipedia.org/wiki/Superformula
const canvas = c,
      context = canvas.getContext("2d");

const SCALE = 150;
const VALUES = [];
for (let index = 0; index < 30; index++) {
  VALUES.push((Math.random() * 20000) + 100);
}

function superformula(phi,a,b,m,n1,n2,n3) {
  return Math.pow( Math.pow( Math.abs( Math.cos(m * phi / 4) / a ), n2 ) + Math.pow( Math.abs( Math.sin(m * phi / 4) / b ), n3 ), -1 / n1 );
}

function renderFormula(now, t1, t2, t3, i) {
  const s1 = now / t1;
  const s2 = now / t2;
  const s3 = now / t3;
  
  const a = Math.abs(Math.sin(s1));
  const b = Math.abs(Math.sin(s1));
  
  const m = Math.abs(Math.sin(s2) * 50);
  const n1 = Math.abs(Math.sin(s3) * 50);
  const n2 = Math.abs(Math.sin(s2) * 50);
  const n3 = Math.abs(Math.sin(s1) * 50);
  
  context.beginPath();
  for (let index = 0; index < 360; index++) {
    const radius = superformula(index / 360 * Math.PI * 2,a,b,m,n1,n2,n3);
    const x = Math.cos(index / 360 * Math.PI * 2) * radius * SCALE;
    const y = Math.sin(index / 360 * Math.PI * 2) * radius * SCALE;
    if (index === 0) {
      context.moveTo(x,y);
    } else {
      context.lineTo(x,y);
    }
  }
  context.closePath();
  
  context.globalCompositeOperation = "lighten";
  
  context.shadowColor = "#0cf";
  context.shadowBlur = 32;
  
  context.lineWidth = i;
  context.strokeStyle = "#fff";
  context.stroke();
}

function render(now) {
  const s1 = now / 1000;
  const s2 = now / 250;
  const s3 = now / 500;
  
  const a = Math.abs(Math.sin(s1));
  const b = Math.abs(Math.sin(s1));
  
  const m = Math.abs(Math.sin(s2) * 50);
  const n1 = Math.abs(Math.sin(s3) * 50);
  const n2 = Math.abs(Math.sin(s2) * 50);
  const n3 = Math.abs(Math.sin(s1) * 50);
  
  context.clearRect(0,0,canvas.width,canvas.height);
  context.save();
  context.translate(canvas.width * 0.5, canvas.height * 0.5);
  for (let index = 0; index < VALUES.length; index += 3) {
    renderFormula(now, VALUES[index], VALUES[index+1], VALUES[index+2], index + 1);
  }
  context.restore();
}

function frame(now) {
  render(now);
}

function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}

window.addEventListener("resize", resize);
window.dispatchEvent(new Event("resize"));

</script>
  <script>
    function superformula(){
      var uno = parseFloat(document.getElementById('uno').value);
      var due = parseFloat(document.getElementById('due').value);
      var tre = parseFloat(document.getElementById('tre').value);
      var quattro = parseFloat(document.getElementById('quattro').value);
      
      var points = Superformula(uno,due,tre,quattro);
      var points_length = points.length;
      var ctx = c.getContext("2d");
      ctx.clearRect(0, 0, c.width, c.height);
      ctx.fillStyle = "#FF0000";
      for(var p = 0; p < points_length;p++){
        (p === 0)?ctx.moveTo(points[p].x, points[p].y):ctx.lineTo(points[p].x, points[p].y);

      }
      ctx.stroke();

    }
    superformula();
    </script>
</body>
</html>
