<!DOCTYPE html>
<html>
<head>
<title>Catch the wizard!</title>
<style>
body{
	margin: 0;
	overflow: hidden;
}
canvas{
	width: 100%;
	height: 100%;
}
</style>
</head>
<body>
    <canvas id="gameScreen">
      What, no canvas support? D:
    </canvas>
 <script>
	window.a = document.getElementsByTagName('canvas')[0];
	window.b = document.getElementsByTagName('body')[0];
	window.c = window.a.getContext('2d');
	window.d = document;
	a.width = window.innerWidth;
	a.height = window.innerHeight;
	/*
	JS1K start
	*/
	//Init
	g = {}
	w = window
	g.w = w.innerWidth;
	g.h = w.innerHeight;
	g.r = 24;
	g.s = 5;
	g.fr = 100;
	
	a.onmousedown = (e)=>{
		iD = c.getImageData(e.clientX, e.clientY, 1, 1);
		if(iD.data[0]!==0){
			clearInterval(g.l);
		}
	}; 
	
	g.sh = [
	  'W000W',
	  '0W0W0',
	  '00W00',
	  '0W0W0',
	  'W000W'
	];
	mr = Math.round	 
	gr = ()=>{
		wi = g.w
		he = g.h
		var ox, oy = 0
		if(he<wi){
			ox = mr(he/g.r)
			g.ry = mr(he/ox)
			g.rx = mr(wi/ox)
		}else{
			ox = mr(wi/g.r)
			g.rx = mr(wi/ox)
			g.ry = mr(he/ox)
		}
		g.o = ox
		g.fb = []
		rx = g.rx
		ry = g.ry
		for(i = 0;i<rx;i++){
			g.fb[i] = []
			for(d = 0;d<ry;d++){
				//qui setta il fb
				g.fb[i][d] = ['00', '00', '00']
			}
		}
		mf = Math.floor
		mra = Math.random
		x = mf(mra() * (g.rx-g.s))
		y = mf(mra() * (g.ry-g.s))
		for(xo = 0;xo<g.s;xo++)
		{
			for(yo = 0;yo<g.s;yo++)
			{
				if(g.sh[yo][xo] === 'W')
					g.fb[x+xo][y+yo] = ['FF','FF','FF']
			}
		}
		
	}
	 
	dr = ()=>{
		rx = g.rx;
		ry = g.ry;
		o = g.o;
		cx= 0, cy = 0;
		for(ii= 0;ii<rx;ii++){
			for(di = 0;di<ry;di++){
				c.fillStyle = "#"+g.fb[ii][di][0]+g.fb[ii][di][1]+g.fb[ii][di][2]
				c.fillRect(cx,cy,o,o)
				cy += o
			}
			cx += o;
			cy = 0;
		}
		
		
	}
	
	l = ()=>{
		g.l = setInterval(function() {
			gr()
			dr()
		}, g.fr)
	}
	 
	l()
 </script>
</body></html>
